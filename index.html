<!doctype html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Survei Kepuasan UKS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    * { font-family: 'Nunito', sans-serif; }

    .fade-in {
      animation: fadeIn .4s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(16px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .likert-option {
      transition: all .2s ease;
    }

    .likert-option.selected {
      border-color: #22c55e;
      background: #dcfce7;
      transform: scale(1.05);
    }
  </style>
</head>

<body class="min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-lime-50">

<div id="app" class="max-w-xl mx-auto p-6">

  <!-- HOME -->
  <section id="home" class="fade-in">
    <h1 class="text-3xl font-extrabold text-center text-green-700">
      Survei Kepuasan Layanan UKS
    </h1>
    <p class="text-center font-semibold text-blue-700 mt-1">
      MTs Negeri 9 Bantul
    </p>

    <button onclick="goSurvey()" class="mt-8 w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold">
      Mulai Survei
    </button>
  </section>

  <!-- SURVEY -->
  <section id="survey" class="hidden fade-in mt-6">

    <h2 class="text-xl font-bold text-center mb-4">
      Pilih jawaban yang paling sesuai
    </h2>

    <div id="questions" class="space-y-6"></div>

    <button onclick="finishSurvey()" class="mt-8 w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl font-bold">
      Selesai Survei
    </button>

  </section>

  <!-- RESULT -->
  <section id="result" class="hidden fade-in mt-6 text-center">

    <h2 class="text-2xl font-extrabold text-green-700 mb-4">
      Hasil Survei
    </h2>

    <div class="text-6xl font-black text-blue-700">
      <span id="score">0</span><span class="text-2xl">/100</span>
    </div>

    <p class="mt-2 font-semibold text-green-700">
      Terima kasih atas partisipasi Anda ğŸ™
    </p>

    <button onclick="resetApp()" class="mt-6 w-full bg-gray-600 hover:bg-gray-700 text-white py-3 rounded-xl font-bold">
      Kembali ke Beranda
    </button>

  </section>

</div>

<script>
  const questions = [
    "Kebersihan ruang UKS",
    "Ketersediaan obat dan alat kesehatan",
    "Pelayanan petugas UKS",
    "Kenyamanan ruang UKS",
    "Manfaat layanan UKS bagi siswa"
  ];

  let answers = [];

  const questionContainer = document.getElementById("questions");

  questions.forEach((q, i) => {
    const div = document.createElement("div");
    div.innerHTML = `
      <p class="font-semibold mb-2">${i+1}. ${q}</p>
      <div class="flex gap-2">
        <div class="likert-option flex-1 border rounded-lg p-3 text-center cursor-pointer"
             onclick="selectOption(this,1,${i})">ğŸ˜¡</div>
        <div class="likert-option flex-1 border rounded-lg p-3 text-center cursor-pointer"
             onclick="selectOption(this,2,${i})">ğŸ˜</div>
        <div class="likert-option flex-1 border rounded-lg p-3 text-center cursor-pointer"
             onclick="selectOption(this,3,${i})">ğŸ˜Š</div>
        <div class="likert-option flex-1 border rounded-lg p-3 text-center cursor-pointer"
             onclick="selectOption(this,4,${i})">ğŸ˜</div>
      </div>
    `;
    questionContainer.appendChild(div);
  });

  function goSurvey() {
    document.getElementById("home").classList.add("hidden");
    document.getElementById("survey").classList.remove("hidden");
  }

  function selectOption(el, value, index) {
    const options = el.parentElement.querySelectorAll(".likert-option");
    options.forEach(opt => opt.classList.remove("selected"));
    el.classList.add("selected");
    answers[index] = value;
  }

  function finishSurvey() {
    if (answers.length < questions.length) {
      alert("Silakan jawab semua pertanyaan terlebih dahulu.");
      return;
    }

    const total = answers.reduce((a,b) => a + b, 0);
    const score = Math.round((total / (questions.length * 4)) * 100);

    document.getElementById("score").innerText = score;

    document.getElementById("survey").classList.add("hidden");
    document.getElementById("result").classList.remove("hidden");
  }

  function resetApp() {
    location.reload();
  }
</script>

</body>
</html>
